<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Local Bootstrap CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='admin_dashboard.css') }}">
    <style>
        body {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
            font-family: Arial, sans-serif;
        }
        .main-content {
            display: flex;
            flex: 1;
        }
        .card-deck .card {
            margin-bottom: 1.5rem;
        }
        .card-img-top {
            height: 180px;
            object-fit: cover;
        }
        .card-background {
            background-image: url('{{ url_for("static", filename="admin/background.jpg") }}');
            background-size: cover;
            background-position: center;
            color: white;
        }
        .card-background .card-body {
            background-color: rgba(0, 0, 0, 0.5); /* Optional: adds a semi-transparent background for better text readability */
            padding: 20px;
        }
    </style>
</head>
<body>
    <!-- Include header -->
    {% include 'admin/header.html' %}

    <!-- Flash messages container -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div class="container-fluid">
        <div class="row">
            <!-- Include sidebar -->
            {% include 'admin/sidebar.html' %}

            <main role="main" class="col-md-10 ml-sm-auto col-lg-10 px-4">
                <div class="pt-3 pb-2 mb-3 border-bottom"><hr>
                    
                    <h1 class="h2">Admin Dashboard</h1>
                </div>

                <div class="container">
                    {% block content %}
                    <div class="card-deck">
                        <!-- Card for Total Customers -->
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Total Customers</h5>
                                <h2 class="card-text">{{ total_customers }}</h2>
                            </div>
                        </div>

                        <!-- Card for Approved Shopkeepers -->
                        <div class="card text-white bg-success mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Approved Shopkeepers</h5>
                                <h2 class="card-text">{{ total_approved_shopkeepers }}</h2>
                            </div>
                        </div>

                        <!-- Card for Pending Shopkeepers -->
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Pending Shopkeepers</h5>
                                <h2 class="card-text">{{ total_pending_shopkeepers }}</h2>
                            </div>
                        </div>
                        
                        <!-- Card for Total Core Categories -->
                        <div class="card text-white bg-info mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Total Core Categories</h5>
                                <h2 class="card-text">{{ total_core_categories }}</h2>
                            </div>
                        </div>

                        <!-- Card for Total Subcategories -->
                        <div class="card text-white bg-dark mb-3">
                            <div class="card-body">
                                <h5 class="card-title">Total Subcategories</h5>
                                <h2 class="card-text">{{ total_subcategories }}</h2>
                            </div>
                        </div>
                    </div>

                    {% block additional_content %}
                    <div class="card-deck mt-3">
                        <!-- Card with Background Image -->
                        <div class="card card-background mt-3">
                            <div class="card-body">
                                <h3>Welcome to the Admin Dashboard!</h3><hr>
                                <p>As an admin, you have the authority to approve new shop registrations, manage core categories and subcategories, and oversee the platform's operations. You can also view customer information and manage approved shopkeepers. Use the tools and features available to maintain a well-organized and efficient marketplace, ensuring a seamless experience for all users.

                                    Thank you for your dedication to keeping BuyDirect running smoothly!</p>
                            </div>
                        </div>
                    {% endblock %}
                    {% endblock %}
                </div>
            </main>
        </div>
    </div>

    <!-- Include footer -->
    {% include 'admin/footer.html' %}

    <!-- Local Bootstrap and jQuery JS -->
</div>

<!-- jQuery, Popper.js, Bootstrap JS -->
<script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

</body>
</html>
